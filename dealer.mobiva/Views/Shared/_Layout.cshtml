@using dealer.mobiva.Helpers
@{
    Layout = null;
    var appUser = SessionManager.CurrentAppUser;
    var dealer = SessionManager.CurrentDealer;
}

<!DOCTYPE html>
<html class="loading" lang="en" data-textdirection="ltr">
<!-- BEGIN: Head-->

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimal-ui">
    <meta name="description" content="Modern admin is super flexible, powerful, clean &amp; modern responsive bootstrap 4 admin template with unlimited possibilities with bitcoin dashboard.">
    <meta name="keywords" content="admin template, modern admin template, dashboard template, flat admin template, responsive admin template, web app, crypto dashboard, bitcoin dashboard">
    <meta name="author" content="PIXINVENT">
    <title>mobiva - @ViewBag.Title</title>
    <link rel="apple-touch-icon" href="/Content/app-assets/images/ico/apple-icon-120.png">

    <link rel="apple-touch-icon" sizes="180x180" href="/Content/mobiva/favicon/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/Content/mobiva/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/Content/mobiva/favicon/favicon-16x16.png">
    <link rel="manifest" href="/Content/mobiva/favicon/site.webmanifest">

    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i%7CQuicksand:300,400,500,700" rel="stylesheet">

    <!-- BEGIN: Vendor CSS-->
    <link rel="stylesheet" type="text/css" href="/Content/app-assets/vendors/css/vendors.min.css">
    <link rel="stylesheet" type="text/css" href="/Content/app-assets/vendors/css/weather-icons/climacons.min.css">
    <link rel="stylesheet" type="text/css" href="/Content/app-assets/fonts/meteocons/style.css">
    <link rel="stylesheet" type="text/css" href="/Content/app-assets/vendors/css/charts/morris.css">
    <link rel="stylesheet" type="text/css" href="/Content/app-assets/vendors/css/charts/chartist.css">
    <link rel="stylesheet" type="text/css" href="/Content/app-assets/vendors/css/charts/chartist-plugin-tooltip.css">
    <!-- END: Vendor CSS-->
    <!-- BEGIN: Theme CSS-->
    <link rel="stylesheet" type="text/css" href="/Content/app-assets/css/bootstrap.css">
    <link rel="stylesheet" type="text/css" href="/Content/app-assets/css/bootstrap-extended.css">
    <link rel="stylesheet" type="text/css" href="/Content/app-assets/css/colors.css">
    <link rel="stylesheet" type="text/css" href="/Content/app-assets/css/components.css">
    <link rel="stylesheet" type="text/css" href="/Content/app-assets/css/core/menu/menu-types/vertical-content-menu.css">
    <!-- END: Theme CSS-->

    @RenderSection("Css", false)

    <!-- BEGIN: Custom CSS-->
    <link rel="stylesheet" type="text/css" href="/Content/assets/css/style.css">
    <!-- END: Custom CSS-->
    <style>
        #loadingOverlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            z-index: 9999;
            display: none;
        }

        .overlay-backdrop {
            position: absolute;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(4px);
        }

        .overlay-spinner {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            color: #fff;
            animation: fadeInUp 0.5s ease-in-out;
        }

            .overlay-spinner .mobiva-logo-circle {
                width: 80px;
                height: 80px;
                border-radius: 50%;
                border: 2px solid #00c4ff;
                display: flex;
                align-items: center;
                justify-content: center;
                margin: 0 auto 15px auto;
            }

            .overlay-spinner p {
                font-size: 1.3rem;
                letter-spacing: 0.8px;
                color: #cceeff;
                font-weight: 500;
            }

                .overlay-spinner p span {
                    color: #00c4ff;
                    font-weight: 700;
                }

        @@keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translate(-50%, -60%);
            }

            to {
                opacity: 1;
                transform: translate(-50%, -50%);
            }
        }
    </style>
</head>
<!-- END: Head-->
<!-- BEGIN: Body-->

<body class="vertical-layout vertical-content-menu 2-columns   fixed-navbar" data-open="click" data-menu="vertical-content-menu" data-col="2-columns">
    <!-- Loading Overlay -->
    <div id="loadingOverlay" style="display: none;">
        <div class="overlay-backdrop"></div>
        <div class="overlay-spinner">
            <div class="mobiva-logo-circle">
                <div class="spinner-border text-light" role="status"></div>
            </div>
            <p><span>ChatGPT</span> ve <span>Mobiva</span> sizin için hazırlıyor...</p>
        </div>
    </div>
    <!-- BEGIN: Header-->
    <nav class="header-navbar navbar-expand-md navbar navbar-with-menu navbar-without-dd-arrow fixed-top navbar-light navbar-hide-on-scroll navbar-border navbar-shadow navbar-brand-center">
        <div class="navbar-wrapper">
            <div class="navbar-header">
                <ul class="nav navbar-nav flex-row">
                    <li class="nav-item mobile-menu d-md-none mr-auto"><a class="nav-link nav-menu-main menu-toggle hidden-xs" href="#"><i class="ft-menu font-large-1"></i></a></li>
                    <li class="nav-item">
                        <a class="navbar-brand text-center" href="@Url.Action("Index", "Home")" style="text-decoration: none;">
                            @*<h3 class="brand-text" style="text-decoration: none !important; font-size: 2.51rem;">ChatGPT + İnsan Zekası = </h3>*@
                            @*<h4 class="brand-text">ChatGPT + İnsan Zekası = </h4>*@
                            <img src="~/Content/mobiva/logo/mobiva_logo_v2.png" style="width: 22%" />
                        </a>
                    </li>
                    <li class="nav-item d-md-none"><a class="nav-link open-navbar-container" data-toggle="collapse" data-target="#navbar-mobile"><i class="la la-ellipsis-v"></i></a></li>
                </ul>
            </div>
            <div class="navbar-container content">
                <div class="collapse navbar-collapse" id="navbar-mobile">
                    <ul class="nav navbar-nav mr-auto float-left">
                        <li class="nav-item d-none d-md-block"><a class="nav-link nav-menu-main menu-toggle hidden-xs" href="#"><i class="ft-menu"></i></a></li>
                        <li class="nav-item d-none d-lg-block"><a class="nav-link nav-link-expand" href="#"><i class="ficon ft-maximize"></i></a></li>
                        <li class="dropdown nav-item mega-dropdown d-none d-lg-block">
                            <a class="dropdown-toggle nav-link" href="#" data-toggle="dropdown">GO</a>
                            <ul class="mega-dropdown-menu dropdown-menu row p-1">
                                <li class="col-md-4 bg-mega p-2">
                                    <h3 class="text-white mb-1 font-weight-bold">Mega Menu Sidebar</h3>
                                    <p class="text-white line-height-2">Candy canes bonbon toffee. Cheesecake dragée gummi bears chupa chups powder bonbon. Apple pie cookie sweet.</p>
                                    <button class="btn btn-outline-white">Learn More</button>
                                </li>
                                <li class="col-md-5 px-2">
                                    <h6 class="font-weight-bold font-medium-2 ml-1">Admin Panel</h6>
                                    <ul class="row mt-2">
                                        <li class="col-6 col-xl-4">
                                            <a class="text-center mb-2 mb-xl-3" href="../ecommerce-menu-template" target="_blank">
                                                <i class="la la-shopping-cart font-large-1 mr-0"></i>
                                                <p class="font-medium-2 mt-25 mb-0">eCommerce</p>
                                            </a>
                                        </li>
                                        <li class="col-6 col-xl-4">
                                            <a class="text-center mb-2 mb-xl-3" href="../travel-menu-template" target="_blank">
                                                <i class="la la-plane font-large-1 mr-0"></i>
                                                <p class="font-medium-2 mt-25 mb-0">Travel</p>
                                            </a>
                                        </li>
                                        <li class="col-6 col-xl-4">
                                            <a class="text-center mb-2 mb-xl-3 mt-75 mt-xl-0" href="../hospital-menu-template" target="_blank">
                                                <i class="la la-stethoscope font-large-1 mr-0"></i>
                                                <p class="font-medium-2 mt-25 mb-0">Hospital</p>
                                            </a>
                                        </li>
                                        <li class="col-6 col-xl-4">
                                            <a class="text-center mb-2 mt-75 mt-xl-0" href="../crypto-menu-template" target="_blank">
                                                <i class="la la-bitcoin font-large-1 mr-0"></i>
                                                <p class="font-medium-2 mt-25 mb-50">Crypto</p>
                                            </a>
                                        </li>
                                        <li class="col-6 col-xl-4">
                                            <a class="text-center mb-2 mt-75 mt-xl-0" href="../support-menu-template" target="_blank">
                                                <i class="la la-tag font-large-1 mr-0"></i>
                                                <p class="font-medium-2 mt-25 mb-50">Support</p>
                                            </a>
                                        </li>
                                        <li class="col-6 col-xl-4">
                                            <a class="text-center mb-2 mt-75 mt-xl-0" href="../bank-menu-template" target="_blank">
                                                <i class="la la-bank font-large-1 mr-0"></i>
                                                <p class="font-medium-2 mt-25 mb-50">Bank</p>
                                            </a>
                                        </li>
                                    </ul>
                                </li>
                                <li class="col-md-3">
                                    <h6 class="font-weight-bold font-medium-2">Components</h6>
                                    <ul class="row mt-1 mt-xl-2">
                                        <li class="col-12 col-xl-6 pl-0">
                                            <ul class="mega-component-list">
                                                <li class="mega-component-item"><a class="mb-1 mb-xl-2" href="component-alerts.html" target="_blank">Alert</a></li>
                                                <li class="mega-component-item"><a class="mb-1 mb-xl-2" href="component-callout.html" target="_blank">Callout</a></li>
                                                <li class="mega-component-item"><a class="mb-1 mb-xl-2" href="component-buttons-basic.html" target="_blank">Buttons</a></li>
                                                <li class="mega-component-item"><a class="mb-1 mb-xl-2" href="component-carousel.html" target="_blank">Carousel</a></li>
                                            </ul>
                                        </li>
                                        <li class="col-12 col-xl-6 pl-0">
                                            <ul class="mega-component-list">
                                                <li class="mega-component-item"><a class="mb-1 mb-xl-2" href="component-dropdowns.html" target="_blank">Drop Down</a></li>
                                                <li class="mega-component-item"><a class="mb-1 mb-xl-2" href="component-list-group.html" target="_blank">List Group</a></li>
                                                <li class="mega-component-item"><a class="mb-1 mb-xl-2" href="component-modals.html" target="_blank">Modals</a></li>
                                                <li class="mega-component-item"><a class="mb-1 mb-xl-2" href="component-pagination.html" target="_blank">Pagination</a></li>
                                            </ul>
                                        </li>
                                    </ul>
                                </li>
                            </ul>
                        </li>

                    </ul>
                    <ul class="nav navbar-nav float-right">
                        <li class="dropdown dropdown-notification nav-item">
                            <a class="nav-link nav-link-label" href="#" data-toggle="dropdown"><i class="ficon ft-bell"></i><span class="badge badge-pill badge-danger badge-up badge-glow">5</span></a>
                            <ul class="dropdown-menu dropdown-menu-media dropdown-menu-right">
                                <li class="dropdown-menu-header">
                                    <h6 class="dropdown-header m-0"><span class="grey darken-2">Notifications</span></h6><span class="notification-tag badge badge-danger float-right m-0">5 New</span>
                                </li>
                                <li class="scrollable-container media-list w-100">
                                    <a href="javascript:void(0)">
                                        <div class="media">
                                            <div class="media-left align-self-center"><i class="ft-plus-square icon-bg-circle bg-cyan mr-0"></i></div>
                                            <div class="media-body">
                                                <h6 class="media-heading">You have new order!</h6>
                                                <p class="notification-text font-small-3 text-muted">Lorem ipsum dolor sit amet, consectetuer elit.</p><small>
                                                    <time class="media-meta text-muted" datetime="2015-06-11T18:29:20+08:00">30 minutes ago</time>
                                                </small>
                                            </div>
                                        </div>
                                    </a><a href="javascript:void(0)">
                                        <div class="media">
                                            <div class="media-left align-self-center"><i class="ft-download-cloud icon-bg-circle bg-red bg-darken-1 mr-0"></i></div>
                                            <div class="media-body">
                                                <h6 class="media-heading red darken-1">99% Server load</h6>
                                                <p class="notification-text font-small-3 text-muted">Aliquam tincidunt mauris eu risus.</p><small>
                                                    <time class="media-meta text-muted" datetime="2015-06-11T18:29:20+08:00">Five hour ago</time>
                                                </small>
                                            </div>
                                        </div>
                                    </a><a href="javascript:void(0)">
                                        <div class="media">
                                            <div class="media-left align-self-center"><i class="ft-alert-triangle icon-bg-circle bg-yellow bg-darken-3 mr-0"></i></div>
                                            <div class="media-body">
                                                <h6 class="media-heading yellow darken-3">Warning notifixation</h6>
                                                <p class="notification-text font-small-3 text-muted">Vestibulum auctor dapibus neque.</p><small>
                                                    <time class="media-meta text-muted" datetime="2015-06-11T18:29:20+08:00">Today</time>
                                                </small>
                                            </div>
                                        </div>
                                    </a><a href="javascript:void(0)">
                                        <div class="media">
                                            <div class="media-left align-self-center"><i class="ft-check-circle icon-bg-circle bg-cyan mr-0"></i></div>
                                            <div class="media-body">
                                                <h6 class="media-heading">Complete the task</h6><small>
                                                    <time class="media-meta text-muted" datetime="2015-06-11T18:29:20+08:00">Last week</time>
                                                </small>
                                            </div>
                                        </div>
                                    </a><a href="javascript:void(0)">
                                        <div class="media">
                                            <div class="media-left align-self-center"><i class="ft-file icon-bg-circle bg-teal mr-0"></i></div>
                                            <div class="media-body">
                                                <h6 class="media-heading">Generate monthly report</h6><small>
                                                    <time class="media-meta text-muted" datetime="2015-06-11T18:29:20+08:00">Last month</time>
                                                </small>
                                            </div>
                                        </div>
                                    </a>
                                </li>
                                <li class="dropdown-menu-footer"><a class="dropdown-item text-muted text-center" href="javascript:void(0)">Read all notifications</a></li>
                            </ul>
                        </li>
                        <li class="dropdown dropdown-user nav-item">
                            <a class="dropdown-toggle nav-link dropdown-user-link" href="#" data-toggle="dropdown">
                                <span class="mr-1 user-name text-bold-700">@appUser.NameSurname</span>
                            </a>
                            <div class="dropdown-menu dropdown-menu-right">
                                <a class="dropdown-item" href="user-profile.html"><i class="ft-user"></i> Profil</a>
                                <div class="dropdown-divider"></div>
                                <a class="dropdown-item" href="user-cards.html"><i class="ft-list"></i> Hakkımızda</a>
                                <div class="dropdown-divider"></div>
                                <a class="dropdown-item" href="@Url.Action("Logout", "Login")"><i class="ft-power"></i> Çıkış</a>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </nav>
    <!-- END: Header-->
    <!-- BEGIN: Content-->
    <div class="app-content content">
        <div class="content-overlay"></div>
        <div class="content-wrapper">
            <div class="content-header row">
            </div>

            <!-- BEGIN: Main Menu-->

            <div class="main-menu menu-static menu-light menu-accordion menu-shadow" data-scroll-to-active="true">
                <div class="main-menu-content">
                    <ul class="navigation navigation-main" id="main-menu-navigation" data-menu="menu-navigation">

                        <li class="nav-item">
                            <a href="@Url.Action("Index", "Home")"><i class="la la-home"></i><span class="menu-title">Özet</span></a>
                        </li>

                        <li class="nav-item">
                            <a href="#"><i class="la la-university"></i><span class="menu-title">Kasa</span></a>
                        </li>

                        <li class="nav-item">
                            <a href="#"><i class="la la-shopping-cart"></i><span class="menu-title">Satış</span></a>
                        </li>

                        <li class="nav-item">
                            <a href="#"><i class="la la-building"></i><span class="menu-title">Şubeler</span></a>
                        </li>

                        <li class="nav-item">
                            <a href="@Url.Action("Index", "Customers")"><i class="la la-users"></i><span class="menu-title">Müşteriler</span></a>
                        </li>

                        <li class="nav-item">
                            <a href="#"><i class="la la-file-text"></i><span class="menu-title">Müşteri Siparişleri</span></a>
                        </li>

                        <li class="nav-item">
                            <a href="#"><i class="la la-wrench"></i><span class="menu-title">Teknik Servis</span></a>
                        </li>

                        <li class="nav-item">
                            <a href="@Url.Action("Index", "Inventory")"><i class="la la-archive"></i><span class="menu-title">Stok</span></a>
                        </li>

                        <li class="nav-item">
                            <a href="@Url.Action("Index", "ToDos")"><i class="la la-check-square"></i><span class="menu-title">Yapılacaklar</span></a>
                        </li>

                        <li class="nav-item">
                            <a href="@Url.Action("AppUsers", "Personnels")"><i class="la la-user-plus"></i><span class="menu-title">Çalışanlar</span></a>
                        </li>


                        <li class="nav-item">
                            <a href="#"><i class="la la-bar-chart"></i><span class="menu-title" data-i18n="Settings">Raporlar</span></a>
                            <ul class="menu-content">
                                <li>
                                    <a class="menu-item" href="#"><i class="la la-arrow-circle-o-up"></i><span data-i18n="ProductBrands">Günlük Akış</span></a>
                                </li>
                            </ul>
                        </li>


                        <li class="nav-item">
                            <a href="#"><i class="la la-cog"></i><span class="menu-title" data-i18n="Settings">Ayarlar</span></a>
                            <ul class="menu-content">
                                <li>
                                    <a class="menu-item" href="@Url.Action("ProductBrands", "Settings")"><i class="la la-tags"></i><span data-i18n="ProductBrands">Ürün Markaları</span></a>
                                </li>
                                <li>
                                    <a class="menu-item" href="@Url.Action("ProductModels", "Settings")"><i class="la la-tags"></i><span data-i18n="ProductBrands">Ürün Modelleri</span></a>
                                </li>

                            </ul>
                        </li>



                    </ul>
                </div>
            </div>


            <!-- END: Main Menu-->

            @RenderBody()

        </div>
    </div>
    <!-- END: Content-->

    <div class="sidenav-overlay"></div>
    <div class="drag-target"></div>

    <!-- BEGIN: Footer-->
    <footer class="footer footer-static footer-light navbar-border">
        <p class="clearfix blue-grey lighten-2 text-sm-center mb-0 px-2">
            <span class="float-md-left d-block d-md-inline-block">
                © @DateTime.Now.Year <a href="https://mobiva" class="text-bold-800 grey darken-2" target="_blank">Mobiva</a>
            </span>
            <span class="float-md-right d-none d-lg-block">
                ChatGPT + İnsan Zekası = Mobiva <i class="ft-heart pink"></i>
                <span id="scroll-top"></span>
            </span>
        </p>

    </footer>
    <!-- END: Footer-->
    <!-- BEGIN: Vendor JS-->
    <script src="/Content/app-assets/vendors/js/vendors.min.js"></script>
    <!-- BEGIN Vendor JS-->
    @RenderSection("Script", false)

    <!-- BEGIN: Theme JS-->
    <script src="/Content/app-assets/js/core/app-menu.js"></script>
    <script src="/Content/app-assets/js/core/app.js"></script>
    <!-- END: Theme JS-->

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            // Tüm <a> linklerini yakala
            const links = document.querySelectorAll("a[href]:not([target='_blank'])");

            links.forEach(link => {
                link.addEventListener("click", function (e) {
                    const href = this.getAttribute("href");

                    // "#" veya boş href'leri atla
                    if (!href || href === "#") return;

                    e.preventDefault();

                    const overlay = document.getElementById("loadingOverlay");
                    if (overlay) overlay.style.display = "block";

                    setTimeout(() => {
                        window.location.href = href;
                    }, 1000);
                });
            });

            // Tüm <button type="button"> butonlarına da uygula (form submit harici)
            const buttons = document.querySelectorAll("button:not([type='submit'])");

            buttons.forEach(button => {
                button.addEventListener("click", function () {
                    const overlay = document.getElementById("loadingOverlay");
                    if (overlay) overlay.style.display = "block";

                    setTimeout(() => {
                        overlay.style.display = "none";
                    }, 1000);
                });
            });

            // <form> submit olayını da kapsayacak şekilde
            const forms = document.querySelectorAll("form");

            forms.forEach(form => {
                form.addEventListener("submit", function (e) {
                    e.preventDefault();

                    const overlay = document.getElementById("loadingOverlay");
                    if (overlay) overlay.style.display = "block";

                    setTimeout(() => {
                        form.submit();
                    }, 1000);
                });
            });
        });
    </script>


    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const currentUrl = window.location.pathname.toLowerCase();
            const navItems = document.querySelectorAll(".main-menu-content ul.navigation > li.nav-item");

            navItems.forEach(function (item) {
                const hasSub = item.classList.contains("has-sub");

                if (hasSub) {
                    const subItems = item.querySelectorAll("ul.menu-content > li");
                    subItems.forEach(function (subItem) {
                        const subLink = subItem.querySelector("a[href]");
                        if (subLink) {
                            const subHref = subLink.getAttribute("href").toLowerCase();

                            // Buraya extra if ekliyoruz:
                            if (currentUrl === subHref || currentUrl.startsWith(subHref) ||
                                (currentUrl.includes("productbrandedit") && subHref.includes("productbrand")) ||
                                (currentUrl.includes("productmodeledit") && subHref.includes("productmodel"))

                            ) {
                                subItem.classList.add("active");
                                item.classList.add("open");
                            }
                        }
                    });
                } else {
                    const link = item.querySelector("a[href]");
                    if (link) {
                        const href = link.getAttribute("href").toLowerCase();

                        // Aynı şekilde buraya da ekleyebiliriz:
                        if (currentUrl === href || currentUrl.startsWith(href) ||
                            (currentUrl.includes("productbrandedit") && href.includes("productbrand")) ||
                            (currentUrl.includes("productmodeledit") && href.includes("productmodel"))

                        ) {
                            item.classList.add("active");
                        }
                    }
                }
            });
        });

    </script>




</body>
<!-- END: Body-->

</html>
